#  数据库面试真题

##  一、什么是事务？

###  1.概念

* 数据库事务是访问并可能操作各种数据项的的一个数据库操作序列， 这些操作要么全部执行， 要么全部不执行， 是一个不可分割的工作单位。
* 事务是由事务是具备ACID特性的操作。是由DBMS来进行操作。

###  2.性质

* 原子性：事务中的全部操作在数据库中是不可以分割的， 要么全部完成， 要么全部不执行。失败进行会滚操作，是由会滚日志完成。
* 一致性：几个并行执行的事务， 其执行结果必须是按照某一顺序， 串行执行的结果相一致。
* 事务的隔离性：对于最终提交之前是其他事物不可见，事务的执行不受其他事务的干扰。
* 夺持久性：对于任意已经提交的事务， 系统必须保证该事务队数据库的改变不被丢失， 即使数据库出现故障。

###  3.作用

* 为数据库操作序列提供了一个从失败恢复到正常状态的方法， 同时提供了数据库即使在异常情况下仍能报纸一致性的方法。
* 当多个应用程序在并发访问数据库时， 可以在这些应用之间提供一个隔离方法， 以防止彼此的操作相互干扰。

##  二、内连接和外连接有什么区别

1.内连接也叫自然连接.

###  1.样例

* A表                B表

  id      name            id      name
  1          a                1       b
  2          b                3       c
  4          c

  内连接就是左表和右表相同的数据：
  select * from A inner join B on A.id=B.id
  id      name            id      name
  1          a                1       b

  外连接分为：左外连接、右外连接、全外连接

  左外连接就是以左表为准，去匹配右表，左表有多少条数据，结果就是多少条数据
  select * from A left join B on A.id=B.id
  id      name            id     name
  1          a                1       b
  2          b                null      null
  4          c                null      null
  右外连接就是与左外连接反之，以右表为准，去匹配左表，右表有多少条数据，结果就是多少条数据
  select * from A right join B on A.id=B.id
  id      name            id     name
  1          a                1       b
  null        null               3       c
  全外连接数据条数不一定，相当与是左外连接和右外连接的综合
  select * from A full join B on A.id=B.id
  id      name            id      name
  1          a                1       b
  2          b                null      null
  null       null               3       c
  4          c                 null       null



###  2.数据库内连接外连接区别

(三) 交叉连接   
  交叉连接不带WHERE 子句，它返回被连接的两个表所有数据行的笛卡尔积，返回到
结果集合中的数据行数等于第一个表中符合查询条件的数据行数乘以第二个表中符合查
询条件的数据行数。例，titles表中有6类图书，而publishers表中有8家出版社，则下
列交叉连接检索到的记录数将等于6*8=48行。   
  例如：SELECT type,pub_name
   FROM titles CROSS JOIN publishers
   ORDER BY type

##  三. 存储过程和函数的区别

* 将多个命令编辑好放在SQL数据库中， 通过函数调用来进行使用
* 函数只能返回一个值和对象  一般是在SQL语句中实现的，而存储过程可以返回多个 他是独立实现的；
* 函数可以嵌入sql中和存储过程中使用，但是存储过程需要让sql的query可以执行，将mysql_real_connect的最后一个参数设置为CLIENT_MULTI_STATEMENTS

函数的限制比较多，不能用临时表，只能用表变量，有些函数不能用，存储过程限制少

存储过程处理的功能比较复杂，而函数实现的功能针对性强，

存储过程可以执行修改表的操作，但是函数不能执行一组修改全局数据库状态的操作

存储过程可以返回参数，如记录集，函数只能返回值或者表对象。存储过程的参数有in，out，inout三种，函数只有in，存储过程声明时不需要返回类型，而函数需要描述返回类型，且函数中必须包含一个有效的return语句

存储过程一般是作为独立部分来执行，而函数可以作为查询语句的一个部分来调用，由于函数可以返回一个表对象，所以在查询中位于from关键字后面，sql语句中不可以含有存储过程

##  四、什么是主键， 什么是外键

* 什么是主键
* 什么是外键

##  五、什么是死锁， 产生的原因是什么？如何避免？

1.定义

2.主要原因是

* 系统资源不足
* 进程推进顺序不合理
* 资源分配不等

3.产生死锁的四个必要条件

* 互斥
*  请求和保持
*  不可剥夺条件
*  环路等待

4.避免死锁

* 预防死锁
* 避免死锁 
* 检测死锁 
* 解除死锁

##  六、什么是共享锁， 什么是互斥锁？

* 共享锁
* 排他锁













